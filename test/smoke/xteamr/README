
This xteamr smoke test executes a simulated reductions directly using the 
DeviceRTL xteam helper functions and compares to the existing OpenMP reduction.

The simulated functions in the ReductionsTestClass show what clang codegen
should generate when it encounters an omp target pragma with one or more sum reductions.
i.e.

#pragma omp target teams distribute parallel for reduction(+:redvar)

The reduction variable redvar can be double, float, int, uint, long, ulong, float _Complex, or double _Complex. 

or min or max reductions like these

#pragma omp target teams distribute parallel for reduction(min:redvar)
#pragma omp target teams distribute parallel for reduction(max:redvar)

For min and max, the reduction variable redvar can be double, float, int, uint, long, or ulong
because complex numbers do not suport comparison operators.

The interfaces to the helper functions that clang codegen is expected to generate
are in DeviceDeclares.h. This is a subset of the DeviceRTL interfaces found in 

  llvm-project/openmp/libomptarget/DeviceRTL/include/Interface.h

This is the documentation found in Interface.h for these functions.

///  Helper functions for high performance cross team reductions.
///
///    Name decoder:  __kmpc_xteamr_<dtype>_<waves>x<warpsize>
///       <waves> number of warps/waves in team
///       <warpsize> 32 or 64
///       example: __kmpc_xteam_f_16x64 is the helper function for data
///                type float with fixed teamsize of 1024 threads.
///    There are 48(6 X 8) helper functions.
///    6 configurations of teamsize are currently created.
///    The most performant configs use max teamsize 1024: 16x64 and 32x32.
///    Currently the Other confis are 8x64, 4x64, 16x32, and 8x32.
///    8 data types available: double, float, int, uint, long, ulong,
///    double  _Complex, and float _complex
///    All xteam helper functions have these 7 args:
///      arg1: the thread local reduction value
///      arg2: pointer to where result is written
///      arg3: global array of team values for this reduction instance
///      arg4: atomic counter of completed teams for this reduction instance
///      arg5: void function pointer of  pair reduction function,
///            (e.g. sum(&a,b),min(&a,b),max(&a,b)
///      arg6: equivalent (to arg5) void function pointer of pair reduction
///            function on LDS memory, (e.g. sum(&a,&b),min(&a,&b),max(&a,&b)
///      arg7: Initializing value for the reduction type


The definitions of the above functions can be found in the new llvm DeviceRTL here: 
  llvm-project/openmp/libomptarget/DeviceRTL/src/Xteamr.cpp
  llvm-project/openmp/libomptarget/DeviceRTL/src/Rfuns.cpp


The goal of this smoke test is to ensure that the DeviceRTL helper functions in Xteamr.cpp
are correct and performant. This smoke test (xteamr) will fail (return a nonzero return code) 
if either the openmp reduction or the simulated reduction get the wrong answer.  

TODO
  - For complex functions use conjugates to test correctness of complex math
      Make c = a*b 
      set a[i] = (1 + 1i) and b[i] = (1 - 1i) 
      then each c[i] should be (2 + 0i) and the sum reduction 
      of vector c should be (ARRAY_SIZE*2 + 0i). 


